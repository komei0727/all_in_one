# 食材管理コンテキスト - ユビキタス言語集

## 概要

このドキュメントは、食材管理コンテキスト固有のユビキタス言語を定義します。
これらの用語は、このコンテキスト内でドメインエキスパートと開発チームが共通で使用する言語です。

## コンテキスト固有の用語

### 食材関連

| 用語           | 英語                  | 定義                                   | 使用例                                  |
| -------------- | --------------------- | -------------------------------------- | --------------------------------------- |
| 食材エントリ   | Ingredient Entry      | システムに登録された個々の食材レコード | 「牛乳(2025-01-25)は1つの食材エントリ」 |
| 在庫アイテム   | Stock Item            | 実際に保有している食材の物理的な単位   | 「冷蔵庫に牛乳が2本ある」               |
| 登録食材       | Registered Ingredient | システムに登録済みの食材               | 「登録食材は全部で50件」                |
| アクティブ食材 | Active Ingredient     | 在庫があり、期限切れでない食材         | 「アクティブ食材のみ表示」              |

### 在庫管理

| 用語     | 英語             | 定義                             | ビジネスルール         |
| -------- | ---------------- | -------------------------------- | ---------------------- |
| 在庫量   | Stock Quantity   | 現在保有している食材の数量       | 0以上の値              |
| 消費     | Consume          | 食材を使用して在庫を減らすこと   | 在庫量を超えて消費不可 |
| 補充     | Replenish        | 食材を購入して在庫を増やすこと   | -                      |
| 在庫調整 | Stock Adjustment | 棚卸しなどで在庫量を修正すること | 理由の記録が必要       |
| 完全消費 | Fully Consumed   | 在庫量が0になること              | 削除候補として表示     |

### 期限管理

| 用語     | 英語            | 定義                         | 閾値    |
| -------- | --------------- | ---------------------------- | ------- |
| 新鮮     | Fresh           | 期限まで十分な余裕がある状態 | 8日以上 |
| 期限接近 | Near Expiry     | 期限が近づいている状態       | 7日以内 |
| 期限間近 | Expiring Soon   | 優先的に消費すべき状態       | 3日以内 |
| 期限切迫 | Critical Expiry | 緊急に消費が必要な状態       | 1日以内 |
| 期限切れ | Expired         | 賞味/消費期限を過ぎた状態    | 0日以下 |

### 保存管理

| 用語         | 英語                     | 定義             | 温度帯                     |
| ------------ | ------------------------ | ---------------- | -------------------------- |
| 冷蔵保存     | Refrigerated Storage     | 冷蔵庫での保存   | 0-10℃                      |
| 冷凍保存     | Frozen Storage           | 冷凍庫での保存   | -18℃以下                   |
| 常温保存     | Room Temperature Storage | 常温での保存     | 15-25℃                     |
| 保存場所詳細 | Storage Location Detail  | 具体的な保存位置 | 「野菜室」「ドアポケット」 |

### 分類体系

| 用語               | 英語             | 定義               | 例                     |
| ------------------ | ---------------- | ------------------ | ---------------------- |
| 主カテゴリー       | Primary Category | 食材の大分類       | 「野菜」「肉・魚」     |
| 食材グループ       | Ingredient Group | 類似食材のまとまり | 「葉物野菜」「根菜」   |
| カスタムカテゴリー | Custom Category  | ユーザー定義の分類 | 「お弁当用」「朝食用」 |

## コンテキスト固有のアクション

### 在庫操作

| アクション | 英語                 | 説明               | 事前条件        | 事後条件       |
| ---------- | -------------------- | ------------------ | --------------- | -------------- |
| 初期登録   | Initial Registration | 新規食材の登録     | -               | 在庫量 > 0     |
| 追加購入   | Additional Purchase  | 既存食材の買い足し | 食材が登録済み  | 在庫量増加     |
| 部分消費   | Partial Consumption  | 一部を使用         | 在庫量 > 消費量 | 在庫量減少     |
| 全量消費   | Complete Consumption | すべて使い切る     | 在庫量 ≥ 消費量 | 在庫量 = 0     |
| 廃棄登録   | Waste Registration   | 期限切れ等での廃棄 | -               | 廃棄履歴に記録 |

### 期限操作

| アクション | 英語           | 説明           | 使用場面           |
| ---------- | -------------- | -------------- | ------------------ |
| 期限延長   | Extend Expiry  | 期限の再設定   | 冷凍保存への変更時 |
| 期限短縮   | Shorten Expiry | 期限を早める   | 開封後             |
| 期限削除   | Remove Expiry  | 期限情報の削除 | 期限のない食材     |

## ビジネスルール用語

### 在庫管理ルール

| ルール名           | 説明                            | 適用条件           |
| ------------------ | ------------------------------- | ------------------ |
| 最小在庫ルール     | 在庫が閾値を下回ったら警告      | カテゴリー別に設定 |
| 同一食材統合ルール | 同じ食材・期限・場所は1エントリ | 新規登録時         |
| ゼロ在庫保持ルール | 在庫0でも履歴として保持         | 消費パターン分析用 |

### 期限管理ルール

| ルール名       | 説明                             | 通知タイミング      |
| -------------- | -------------------------------- | ------------------- |
| 段階的期限通知 | 期限に応じて通知頻度を変更       | 7日前、3日前、1日前 |
| 期限なし許可   | 調味料等は期限なしOK             | -                   |
| 消費期限優先   | 消費期限がある場合はそちらを優先 | -                   |

## 状態遷移

### 食材ライフサイクル

```
新規 → アクティブ → 期限接近 → 期限切れ → 廃棄
         ↓
      在庫切れ → 補充済み
```

### 在庫状態

| 現在の状態 | アクション | 次の状態          |
| ---------- | ---------- | ----------------- |
| 在庫あり   | 消費       | 在庫あり/在庫切れ |
| 在庫あり   | 補充       | 在庫あり          |
| 在庫切れ   | 補充       | 在庫あり          |
| 在庫切れ   | 削除       | 削除済み          |

## ドメイン固有の計算

### 消費速度

| 用語         | 計算式                | 用途             |
| ------------ | --------------------- | ---------------- |
| 日次消費量   | 総消費量 ÷ 経過日数   | 消費ペース把握   |
| 週次消費量   | 日次消費量 × 7        | 買い物計画       |
| 在庫持続日数 | 現在庫量 ÷ 日次消費量 | 次回購入時期予測 |

### 期限スコア

| スコア | 計算基準        | 表示 |
| ------ | --------------- | ---- |
| 100-80 | 期限まで8日以上 | 🟢   |
| 79-50  | 期限まで4-7日   | 🔵   |
| 49-20  | 期限まで2-3日   | 🟡   |
| 19-0   | 期限まで1日以内 | 🔴   |

## エラーメッセージ用語

### 在庫関連

| エラー種別     | メッセージ                         | 原因                   |
| -------------- | ---------------------------------- | ---------------------- |
| 在庫不足エラー | 「在庫が不足しています」           | 消費量 > 在庫量        |
| 重複エラー     | 「同じ食材が既に登録されています」 | 名前・期限・場所が一致 |
| 削除制限エラー | 「使用中のため削除できません」     | 他機能で参照中         |

## UI表示用語

### 状態表示

| 状態     | 表示テキスト     | アイコン/色 |
| -------- | ---------------- | ----------- |
| 新規登録 | 「NEW」          | 🆕 / 緑     |
| 期限間近 | 「まもなく期限」 | ⚠️ / 黄     |
| 期限切れ | 「期限切れ」     | ❌ / 赤     |
| 在庫切れ | 「在庫なし」     | 📦 / 灰     |

### アクションラベル

| 機能 | ボタンテキスト | 説明文                             |
| ---- | -------------- | ---------------------------------- |
| 登録 | 「食材を追加」 | 「新しい食材を登録します」         |
| 消費 | 「使用する」   | 「食材を消費して在庫を減らします」 |
| 補充 | 「買い足す」   | 「同じ食材を追加購入します」       |
| 廃棄 | 「廃棄する」   | 「食材を廃棄して履歴に残します」   |

## 通知メッセージ

### 期限通知

| タイミング | メッセージテンプレート                        |
| ---------- | --------------------------------------------- |
| 7日前      | 「{食材名}の賞味期限まであと1週間です」       |
| 3日前      | 「{食材名}がまもなく期限切れです（あと3日）」 |
| 1日前      | 「【要注意】{食材名}の期限は明日です」        |
| 当日       | 「【緊急】{食材名}が本日期限切れです」        |

### 在庫通知

| 状況       | メッセージテンプレート                   |
| ---------- | ---------------------------------------- |
| 在庫不足   | 「{食材名}の在庫が少なくなっています」   |
| 在庫切れ   | 「{食材名}の在庫がなくなりました」       |
| 長期未使用 | 「{食材名}を{日数}日間使用していません」 |

## 更新履歴

| 日付       | 内容     | 作成者  |
| ---------- | -------- | ------- |
| 2025-01-21 | 初版作成 | @system |
