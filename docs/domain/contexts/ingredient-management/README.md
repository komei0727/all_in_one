# 食材・在庫管理コンテキスト

## 概要

食材の在庫管理と賞味期限管理に加え、買い物サポート機能を統合したコアドメイン。食材ロス削減（月3,000-5,000円）と重複購入の防止を実現します。

## 主要な責務

### 食材管理機能

- 食材の登録・更新・削除
- 在庫数量の管理（消費・補充）
- 賞味期限の監視と通知
- カテゴリー・単位・保存場所の管理

### 買い物サポート機能

- 買い物モード（簡易在庫確認画面）
- カテゴリー別クイックアクセス
- 在庫有無の即座確認
- 最近確認した食材の表示

## ドメインモデル

### エンティティ

- **食材（Ingredient）** - 在庫管理の中核
- **カテゴリー（Category）** - 食材分類マスタ
- **単位（Unit）** - 数量単位マスタ
- **買い物セッション（ShoppingSession）** - 買い物活動の記録

### 主要な値オブジェクト

- **ExpiryInfo** - 賞味期限と消費期限を一体管理
- **Quantity** - 数量と単位の組み合わせ
- **StorageLocation** - 保存場所（冷蔵/冷凍/常温）

### ビュー

- **QuickAccessView** - 買い物モード用の高速アクセスビュー

### ドメインイベント

- `IngredientExpiringSoon` - 期限3日前の通知
- `StockDepleted` - 在庫切れ通知
- `ExpiryInfoUpdated` - 期限情報更新
- `ShoppingSessionCompleted` - 買い物セッション完了

## ビジネスルール

### 食材管理

- 同じ名前・期限・保存場所の食材は重複不可
- 在庫数量は常に0以上
- ExpiryInfo内で賞味期限と消費期限の整合性を保証
- 期限3日前に通知（田中健太のペインポイント対応）

### 買い物サポート

- 買い物セッションは同時に1つのみアクティブ
- 買い物モードでは在庫の更新不可（読み取り専用）
- 最近確認した食材は20件まで保持

## 他コンテキストとの関係

- **通知サービス** → 期限通知イベント発行
- **共有カーネル** → 基本型の利用
- **ユーザー認証** ← UserId取得

## 設計ドキュメント

- [SUDOモデリング](./sudo-modeling.md) - システム設計図
- [ドメインモデル](./domain-model.md) - エンティティと値オブジェクト
- [集約設計](./aggregates.md) - トランザクション境界
- [ドメインイベント](./domain-events.md) - イベント仕様
- [リポジトリ](./repositories.md) - 永続化インターフェース
- [アプリケーションサービス](./application-services.md) - ユースケース実装
