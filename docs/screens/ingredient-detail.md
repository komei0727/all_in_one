# é£Ÿæè©³ç´°ç”»é¢

## æ¦‚è¦

é¸æŠã—ãŸé£Ÿæã®è©³ç´°æƒ…å ±ã‚’è¡¨ç¤ºã—ã€åœ¨åº«æ“ä½œï¼ˆæ¶ˆè²»ãƒ»è£œå……ãƒ»èª¿æ•´ï¼‰ã€ç·¨é›†ã€å‰Šé™¤ãªã©ã€é£Ÿæã«é–¢ã™ã‚‹ã‚ã‚‰ã‚†ã‚‹æ“ä½œã‚’å®Ÿè¡Œã§ãã‚‹ç”»é¢ã€‚

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

**As a** é£Ÿæã‚’ç®¡ç†ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼  
**I want to** é£Ÿæã®è©³ç´°ã‚’ç¢ºèªã—æ“ä½œã—ãŸã„  
**So that** æ­£ç¢ºãªåœ¨åº«ç®¡ç†ã¨åŠ¹ç‡çš„ãªé£Ÿææ´»ç”¨ãŒã§ãã‚‹

## UIè¦ä»¶

### ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆæ§‹é€ 

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header                  â”‚
â”‚ [â† æˆ»ã‚‹] [ç·¨é›†] [â‹®ãƒ¡ãƒ‹ãƒ¥ãƒ¼] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ingredient Hero         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” ãƒˆãƒãƒˆ       â”‚
â”‚ â”‚  ğŸ…     â”‚ é‡èœãƒ»å†·è”µåº«  â”‚
â”‚ â”‚  IMAGE  â”‚ ğŸŸ¡ åœ¨åº«ä¸è¶³   â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ æœŸé™: æ®‹ã‚Š2æ—¥ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Stock Info              â”‚
â”‚ ç¾åœ¨ã®åœ¨åº«: 2å€‹ (é–¾å€¤:5å€‹) â”‚
â”‚ è³¼å…¥æ—¥: 2025-06-26      â”‚
â”‚ ä¾¡æ ¼: Â¥298              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Quick Actions           â”‚
â”‚ [æ¶ˆè²»] [è£œå……] [èª¿æ•´] [å»ƒæ£„] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Storage Details         â”‚
â”‚ ä¿å­˜å ´æ‰€: å†·è”µåº«ãƒ»é‡èœå®¤   â”‚
â”‚ è³å‘³æœŸé™: 2025-06-30    â”‚
â”‚ æ¶ˆè²»æœŸé™: 2025-06-28    â”‚
â”‚ ãƒ¡ãƒ¢: æœ‰æ©Ÿæ ½åŸ¹           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Recent Activities       â”‚
â”‚ ğŸ“ˆ +3å€‹è£œå…… (2æ—¥å‰)     â”‚
â”‚ ğŸ“‰ -1å€‹æ¶ˆè²» (3æ™‚é–“å‰)   â”‚
â”‚ ğŸ“ ç·¨é›† (1é€±é–“å‰)       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### è©³ç´°ä»•æ§˜

#### 1. ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³

```typescript
interface IngredientHero {
  id: string
  name: string
  image?: string
  category: {
    id: string
    name: string
    icon: string
  }
  stockStatus: {
    level: 'IN_STOCK' | 'LOW_STOCK' | 'OUT_OF_STOCK'
    message: string
    color: string
  }
  expiryStatus: {
    level: 'FRESH' | 'EXPIRING_SOON' | 'EXPIRED'
    message: string
    daysUntilExpiry?: number
  }
}

const stockStatusConfig = {
  IN_STOCK: {
    message: 'åœ¨åº«ååˆ†',
    color: '#10B981',
    icon: 'ğŸŸ¢',
  },
  LOW_STOCK: {
    message: 'åœ¨åº«ä¸è¶³',
    color: '#F59E0B',
    icon: 'ğŸŸ¡',
  },
  OUT_OF_STOCK: {
    message: 'åœ¨åº«åˆ‡ã‚Œ',
    color: '#EF4444',
    icon: 'ğŸ”´',
  },
}
```

**ãƒ‡ã‚¶ã‚¤ãƒ³ä»•æ§˜**:

- **ç”»åƒ**: 120px Ã— 120pxã€è§’ä¸¸ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆç”»åƒå¯¾å¿œ
- **ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º**: ã‚¢ã‚¤ã‚³ãƒ³ + è‰² + ãƒ†ã‚­ã‚¹ãƒˆã§æ˜ç¢ºãªçŠ¶æ…‹è¡¨ç¾
- **ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–**: ãƒ¢ãƒã‚¤ãƒ«ã§ã¯ç¸¦ä¸¦ã³ã€ã‚¿ãƒ–ãƒ¬ãƒƒãƒˆä»¥ä¸Šã§æ¨ªä¸¦ã³

#### 2. åœ¨åº«æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³

```typescript
interface StockInfo {
  currentQuantity: {
    amount: number
    unit: string
  }
  threshold?: number
  purchaseDate: Date
  price?: number
  stockValue?: number // price Ã— quantity
}

const StockInfoDisplay = ({ stockInfo }: { stockInfo: StockInfo }) => (
  <div className="bg-gray-50 rounded-lg p-4 space-y-3">
    <div className="flex justify-between items-center">
      <span className="text-gray-600">ç¾åœ¨ã®åœ¨åº«</span>
      <span className="text-lg font-semibold">
        {stockInfo.currentQuantity.amount} {stockInfo.currentQuantity.unit}
      </span>
    </div>

    {stockInfo.threshold && (
      <div className="flex justify-between items-center">
        <span className="text-gray-600">åœ¨åº«é–¾å€¤</span>
        <span className="text-sm text-gray-500">
          {stockInfo.threshold} {stockInfo.currentQuantity.unit}
        </span>
      </div>
    )}

    <div className="flex justify-between items-center">
      <span className="text-gray-600">è³¼å…¥æ—¥</span>
      <span className="text-sm">
        {format(stockInfo.purchaseDate, 'yyyy-MM-dd')}
      </span>
    </div>

    {stockInfo.price && (
      <div className="flex justify-between items-center">
        <span className="text-gray-600">ä¾¡æ ¼</span>
        <span className="text-sm">Â¥{stockInfo.price}</span>
      </div>
    )}
  </div>
)
```

#### 3. ã‚¯ã‚¤ãƒƒã‚¯ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

```typescript
interface QuickAction {
  type: 'CONSUME' | 'REPLENISH' | 'ADJUST' | 'DISCARD'
  label: string
  icon: React.ReactNode
  color: string
  disabled?: boolean
  disabledReason?: string
}

const quickActions: QuickAction[] = [
  {
    type: 'CONSUME',
    label: 'æ¶ˆè²»',
    icon: <Minus className="w-4 h-4" />,
    color: 'bg-blue-500 hover:bg-blue-600',
    disabled: stockInfo.currentQuantity.amount === 0,
    disabledReason: 'åœ¨åº«ãŒã‚ã‚Šã¾ã›ã‚“'
  },
  {
    type: 'REPLENISH',
    label: 'è£œå……',
    icon: <Plus className="w-4 h-4" />,
    color: 'bg-green-500 hover:bg-green-600'
  },
  {
    type: 'ADJUST',
    label: 'èª¿æ•´',
    icon: <Edit className="w-4 h-4" />,
    color: 'bg-yellow-500 hover:bg-yellow-600'
  },
  {
    type: 'DISCARD',
    label: 'å»ƒæ£„',
    icon: <Trash className="w-4 h-4" />,
    color: 'bg-red-500 hover:bg-red-600',
    disabled: stockInfo.currentQuantity.amount === 0,
    disabledReason: 'åœ¨åº«ãŒã‚ã‚Šã¾ã›ã‚“'
  }
]
```

**ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œãƒ•ãƒ­ãƒ¼**:

```typescript
const handleQuickAction = (action: QuickAction) => {
  setSelectedAction(action)
  setShowActionModal(true)
}

const ActionModal = ({ action, onConfirm, onCancel }) => (
  <Modal>
    <div className="p-6">
      <h3 className="text-lg font-semibold mb-4">
        {action.label}ã™ã‚‹
      </h3>

      <div className="space-y-4">
        <div>
          <label className="block text-sm font-medium mb-2">
            æ•°é‡
          </label>
          <div className="flex space-x-2">
            <input
              type="number"
              min="0"
              step="0.01"
              className="flex-1 border rounded-lg px-3 py-2"
              placeholder={`${action.label}ã™ã‚‹æ•°é‡`}
            />
            <span className="flex items-center px-3 py-2 text-gray-500">
              {stockInfo.currentQuantity.unit}
            </span>
          </div>
        </div>

        <div>
          <label className="block text-sm font-medium mb-2">
            ç†ç”±ãƒ»ãƒ¡ãƒ¢
          </label>
          <textarea
            className="w-full border rounded-lg px-3 py-2"
            rows={3}
            placeholder={`${action.label}ã®ç†ç”±ã‚„ãƒ¡ãƒ¢`}
          />
        </div>
      </div>

      <div className="flex space-x-3 mt-6">
        <button
          onClick={onCancel}
          className="flex-1 px-4 py-2 border rounded-lg"
        >
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button
          onClick={onConfirm}
          className={`flex-1 px-4 py-2 text-white rounded-lg ${action.color}`}
        >
          {action.label}ã™ã‚‹
        </button>
      </div>
    </div>
  </Modal>
)
```

#### 4. è©³ç´°æƒ…å ±ã‚»ã‚¯ã‚·ãƒ§ãƒ³

```typescript
interface DetailedInfo {
  storageLocation: {
    type: string
    detail?: string
    icon: string
  }
  expiryInfo: {
    bestBeforeDate?: Date
    useByDate?: Date
  }
  memo?: string
  nutritionInfo?: {
    calories?: number
    protein?: number
    carbs?: number
    fat?: number
  }
}

const DetailedInfoSection = ({ info }: { info: DetailedInfo }) => (
  <div className="space-y-4">
    <div className="flex items-center space-x-3">
      <span className="text-xl">{info.storageLocation.icon}</span>
      <div>
        <p className="font-medium">ä¿å­˜å ´æ‰€</p>
        <p className="text-sm text-gray-600">
          {info.storageLocation.type}
          {info.storageLocation.detail && ` ãƒ» ${info.storageLocation.detail}`}
        </p>
      </div>
    </div>

    <div className="border-t pt-4">
      <h4 className="font-medium mb-2">æœŸé™æƒ…å ±</h4>
      <div className="space-y-2 text-sm">
        {info.expiryInfo.bestBeforeDate && (
          <div className="flex justify-between">
            <span className="text-gray-600">è³å‘³æœŸé™</span>
            <span>{format(info.expiryInfo.bestBeforeDate, 'yyyy-MM-dd')}</span>
          </div>
        )}
        {info.expiryInfo.useByDate && (
          <div className="flex justify-between">
            <span className="text-gray-600">æ¶ˆè²»æœŸé™</span>
            <span>{format(info.expiryInfo.useByDate, 'yyyy-MM-dd')}</span>
          </div>
        )}
      </div>
    </div>

    {info.memo && (
      <div className="border-t pt-4">
        <h4 className="font-medium mb-2">ãƒ¡ãƒ¢</h4>
        <p className="text-sm text-gray-600">{info.memo}</p>
      </div>
    )}
  </div>
)
```

#### 5. æ´»å‹•å±¥æ­´ã‚»ã‚¯ã‚·ãƒ§ãƒ³

```typescript
interface ActivityItem {
  id: string
  type: 'CONSUME' | 'REPLENISH' | 'ADJUST' | 'EDIT' | 'CREATE'
  quantity?: number
  unit?: string
  reason?: string
  performedAt: Date
  performedBy: string
}

const activityConfig = {
  'CONSUME': {
    icon: 'ğŸ“‰',
    color: 'text-blue-600',
    bgColor: 'bg-blue-50',
    prefix: '-'
  },
  'REPLENISH': {
    icon: 'ğŸ“ˆ',
    color: 'text-green-600',
    bgColor: 'bg-green-50',
    prefix: '+'
  },
  'ADJUST': {
    icon: 'âš–ï¸',
    color: 'text-yellow-600',
    bgColor: 'bg-yellow-50',
    prefix: 'Â±'
  },
  'EDIT': {
    icon: 'ğŸ“',
    color: 'text-gray-600',
    bgColor: 'bg-gray-50',
    prefix: ''
  },
  'CREATE': {
    icon: 'âœ¨',
    color: 'text-purple-600',
    bgColor: 'bg-purple-50',
    prefix: ''
  }
}

const ActivityList = ({ activities }: { activities: ActivityItem[] }) => (
  <div className="space-y-3">
    <h3 className="font-semibold">æœ€è¿‘ã®æ´»å‹•</h3>
    {activities.length === 0 ? (
      <p className="text-gray-500 text-sm py-4 text-center">
        æ´»å‹•å±¥æ­´ã¯ã‚ã‚Šã¾ã›ã‚“
      </p>
    ) : (
      <div className="space-y-2">
        {activities.map(activity => {
          const config = activityConfig[activity.type]
          return (
            <div
              key={activity.id}
              className={`flex items-center space-x-3 p-3 rounded-lg ${config.bgColor}`}
            >
              <span className="text-lg">{config.icon}</span>
              <div className="flex-1">
                <div className="flex items-center space-x-2">
                  <span className={`font-medium ${config.color}`}>
                    {activity.type === 'EDIT' ? 'ç·¨é›†' :
                     activity.type === 'CREATE' ? 'ä½œæˆ' :
                     `${config.prefix}${activity.quantity}${activity.unit}${
                       activity.type === 'CONSUME' ? 'æ¶ˆè²»' :
                       activity.type === 'REPLENISH' ? 'è£œå……' : 'èª¿æ•´'
                     }`}
                  </span>
                  <span className="text-xs text-gray-500">
                    {formatDistanceToNow(activity.performedAt, { locale: ja })}å‰
                  </span>
                </div>
                {activity.reason && (
                  <p className="text-xs text-gray-600 mt-1">
                    {activity.reason}
                  </p>
                )}
              </div>
            </div>
          )
        })}
      </div>
    )}
  </div>
)
```

### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ã¨ã‚¢ã‚¯ã‚·ãƒ§ãƒ³

#### ãƒ˜ãƒƒãƒ€ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼

```typescript
const HeaderActions = ({ ingredient, onEdit, onDelete }) => {
  const [showMenu, setShowMenu] = useState(false)

  const menuItems = [
    {
      label: 'ç·¨é›†',
      icon: <Edit className="w-4 h-4" />,
      action: onEdit,
      color: 'text-blue-600'
    },
    {
      label: 'è¤‡è£½',
      icon: <Copy className="w-4 h-4" />,
      action: () => onDuplicate(ingredient),
      color: 'text-green-600'
    },
    {
      label: 'å‰Šé™¤',
      icon: <Trash className="w-4 h-4" />,
      action: onDelete,
      color: 'text-red-600'
    }
  ]

  return (
    <div className="relative">
      <button
        onClick={() => setShowMenu(!showMenu)}
        className="p-2 rounded-lg hover:bg-gray-100"
      >
        <MoreVertical className="w-5 h-5" />
      </button>

      {showMenu && (
        <div className="absolute right-0 top-full mt-1 w-48 bg-white rounded-lg shadow-lg border z-10">
          {menuItems.map(item => (
            <button
              key={item.label}
              onClick={() => {
                item.action()
                setShowMenu(false)
              }}
              className={`w-full flex items-center space-x-3 px-4 py-3 text-left hover:bg-gray-50 ${item.color}`}
            >
              {item.icon}
              <span>{item.label}</span>
            </button>
          ))}
        </div>
      )}
    </div>
  )
}
```

#### å‰Šé™¤ç¢ºèª

```typescript
const DeleteConfirmationModal = ({ ingredient, onConfirm, onCancel }) => (
  <Modal>
    <div className="p-6">
      <div className="flex items-center space-x-3 mb-4">
        <div className="w-12 h-12 bg-red-100 rounded-full flex items-center justify-center">
          <Trash className="w-6 h-6 text-red-600" />
        </div>
        <div>
          <h3 className="text-lg font-semibold">é£Ÿæã‚’å‰Šé™¤</h3>
          <p className="text-gray-600">ã“ã®æ“ä½œã¯å–ã‚Šæ¶ˆã›ã¾ã›ã‚“</p>
        </div>
      </div>

      <div className="bg-gray-50 rounded-lg p-4 mb-6">
        <div className="flex items-center space-x-3">
          <div className="w-10 h-10 bg-gray-200 rounded-lg flex items-center justify-center">
            <span className="text-lg">{ingredient.category.icon}</span>
          </div>
          <div>
            <p className="font-medium">{ingredient.name}</p>
            <p className="text-sm text-gray-600">
              ç¾åœ¨ã®åœ¨åº«: {ingredient.currentQuantity.amount} {ingredient.currentQuantity.unit}
            </p>
          </div>
        </div>
      </div>

      <p className="text-sm text-gray-600 mb-6">
        ã“ã®é£Ÿæã¨é–¢é€£ã™ã‚‹å±¥æ­´ãƒ‡ãƒ¼ã‚¿ãŒå‰Šé™¤ã•ã‚Œã¾ã™ã€‚æœ¬å½“ã«å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ
      </p>

      <div className="flex space-x-3">
        <button
          onClick={onCancel}
          className="flex-1 px-4 py-2 border rounded-lg"
        >
          ã‚­ãƒ£ãƒ³ã‚»ãƒ«
        </button>
        <button
          onClick={onConfirm}
          className="flex-1 px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700"
        >
          å‰Šé™¤ã™ã‚‹
        </button>
      </div>
    </div>
  </Modal>
)
```

### APIä»•æ§˜

#### é£Ÿæè©³ç´°å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/v1/ingredients/{id}`

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:

```json
{
  "data": {
    "id": "ing_abc123",
    "name": "ãƒˆãƒãƒˆ",
    "category": {
      "id": "cat_vegetable",
      "name": "é‡èœ",
      "icon": "ğŸ¥¬"
    },
    "currentQuantity": {
      "amount": 2,
      "unit": {
        "id": "unt_piece",
        "symbol": "å€‹"
      }
    },
    "threshold": 5,
    "stockStatus": "LOW_STOCK",
    "expiryStatus": "EXPIRING_SOON",
    "daysUntilExpiry": 2,
    "storageLocation": {
      "type": "REFRIGERATED",
      "detail": "é‡èœå®¤"
    },
    "expiryInfo": {
      "bestBeforeDate": "2025-06-30",
      "useByDate": "2025-06-28"
    },
    "price": 298,
    "purchaseDate": "2025-06-26",
    "memo": "æœ‰æ©Ÿæ ½åŸ¹",
    "createdAt": "2025-06-26T10:00:00Z",
    "updatedAt": "2025-06-28T08:30:00Z"
  }
}
```

#### æ´»å‹•å±¥æ­´å–å¾—

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `GET /api/v1/ingredients/{id}/events`

**ãƒ¬ã‚¹ãƒãƒ³ã‚¹**:

```json
{
  "data": [
    {
      "id": "evt_abc123",
      "type": "CONSUME",
      "quantity": 1,
      "unit": "å€‹",
      "reason": "å¤•é£Ÿã§ä½¿ç”¨",
      "performedAt": "2025-06-28T18:30:00Z",
      "performedBy": "usr_def456"
    }
  ],
  "pagination": {
    "page": 1,
    "limit": 10,
    "total": 25,
    "hasNext": true
  }
}
```

#### åœ¨åº«æ“ä½œ

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/v1/ingredients/{id}/consume`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:

```json
{
  "quantity": 1,
  "reason": "å¤•é£Ÿã§ä½¿ç”¨"
}
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹æœ€é©åŒ–

#### ãƒ‡ãƒ¼ã‚¿æœ€é©åŒ–

```typescript
// è©³ç´°ãƒ‡ãƒ¼ã‚¿ã¨å±¥æ­´ãƒ‡ãƒ¼ã‚¿ã®ä¸¦åˆ—å–å¾—
const useIngredientDetail = (id: string) => {
  const ingredientQuery = useQuery({
    queryKey: ['ingredient', id],
    queryFn: () => fetchIngredient(id),
  })

  const activitiesQuery = useQuery({
    queryKey: ['ingredient-activities', id],
    queryFn: () => fetchIngredientActivities(id),
    enabled: !!ingredientQuery.data, // é£Ÿæãƒ‡ãƒ¼ã‚¿å–å¾—å¾Œã«å®Ÿè¡Œ
  })

  return {
    ingredient: ingredientQuery.data,
    activities: activitiesQuery.data,
    isLoading: ingredientQuery.isLoading || activitiesQuery.isLoading,
    error: ingredientQuery.error || activitiesQuery.error,
  }
}
```

#### ç”»åƒæœ€é©åŒ–

```typescript
const IngredientImage = ({ src, alt, fallback }) => (
  <div className="relative w-24 h-24 bg-gray-100 rounded-lg overflow-hidden">
    {src ? (
      <Image
        src={src}
        alt={alt}
        fill
        className="object-cover"
        sizes="96px"
        priority
      />
    ) : (
      <div className="w-full h-full flex items-center justify-center text-2xl">
        {fallback || 'ğŸ¥—'}
      </div>
    )}
  </div>
)
```

## æŠ€è¡“å®Ÿè£…

### Componentæ§‹é€ 

```
IngredientDetailPage
â”œâ”€â”€ IngredientHeader
â”‚   â”œâ”€â”€ BackButton
â”‚   â”œâ”€â”€ Title
â”‚   â””â”€â”€ ActionMenu
â”œâ”€â”€ IngredientHero
â”‚   â”œâ”€â”€ IngredientImage
â”‚   â”œâ”€â”€ BasicInfo
â”‚   â””â”€â”€ StatusIndicators
â”œâ”€â”€ StockInfoSection
â”œâ”€â”€ QuickActionsGrid
â”‚   â””â”€â”€ QuickActionButton
â”œâ”€â”€ DetailedInfoSection
â”œâ”€â”€ ActivityHistorySection
â”‚   â””â”€â”€ ActivityItem
â”œâ”€â”€ ActionModal (conditional)
â”œâ”€â”€ DeleteConfirmModal (conditional)
â””â”€â”€ LoadingState (conditional)
```

### çŠ¶æ…‹ç®¡ç†

```typescript
export const useIngredientDetail = (id: string) => {
  const [selectedAction, setSelectedAction] = useState<QuickAction | null>(null)
  const [showDeleteModal, setShowDeleteModal] = useState(false)

  const {
    data: ingredient,
    isLoading,
    error,
    refetch,
  } = useQuery({
    queryKey: ['ingredient', id],
    queryFn: () => fetchIngredient(id),
  })

  const stockOperation = useMutation({
    mutationFn: ({ type, quantity, reason }) => performStockOperation(id, type, quantity, reason),
    onSuccess: () => {
      refetch()
      setSelectedAction(null)
      toast.success('åœ¨åº«ã‚’æ›´æ–°ã—ã¾ã—ãŸ')
    },
  })

  const deleteIngredient = useMutation({
    mutationFn: () => deleteIngredientById(id),
    onSuccess: () => {
      router.push('/ingredients')
      toast.success('é£Ÿæã‚’å‰Šé™¤ã—ã¾ã—ãŸ')
    },
  })

  return {
    ingredient,
    isLoading,
    error,
    selectedAction,
    setSelectedAction,
    showDeleteModal,
    setShowDeleteModal,
    performStockOperation: stockOperation.mutate,
    deleteIngredient: deleteIngredient.mutate,
    isOperating: stockOperation.isLoading || deleteIngredient.isLoading,
  }
}
```

## ä»Šå¾Œã®æ‹¡å¼µ

### ãƒ•ã‚§ãƒ¼ã‚º2æ©Ÿèƒ½

- **ãƒ¬ã‚·ãƒ”é€£æº**: ã“ã®é£Ÿæã‚’ä½¿ã£ãŸãƒ¬ã‚·ãƒ”ææ¡ˆ
- **æ „é¤Šæƒ…å ±**: ã‚«ãƒ­ãƒªãƒ¼ãƒ»æ „é¤Šæˆåˆ†ã®è¡¨ç¤º
- **ä¾¡æ ¼æ¨ç§»**: ä¾¡æ ¼å¤‰å‹•ã®ã‚°ãƒ©ãƒ•è¡¨ç¤º

### ãƒ•ã‚§ãƒ¼ã‚º3æ©Ÿèƒ½

- **å†™çœŸç®¡ç†**: è¤‡æ•°å†™çœŸã®ã‚®ãƒ£ãƒ©ãƒªãƒ¼è¡¨ç¤º
- **è³å‘³æœŸé™ã‚¢ãƒ©ãƒ¼ãƒˆ**: ãƒ—ãƒƒã‚·ãƒ¥é€šçŸ¥è¨­å®š
- **å…±æœ‰æ©Ÿèƒ½**: é£Ÿææƒ…å ±ã®å®¶æ—é–“å…±æœ‰
