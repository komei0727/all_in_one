# é£Ÿæç™»éŒ²ãƒ»ç·¨é›†ç”»é¢

## æ¦‚è¦

æ–°è¦é£Ÿæã®ç™»éŒ²ã¨æ—¢å­˜é£Ÿæã®ç·¨é›†ã‚’è¡Œã†ç”»é¢ã€‚ã‚¹ãƒ†ãƒƒãƒ—å½¢å¼ã®å…¥åŠ›ã«ã‚ˆã‚Šã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›è² è·ã‚’è»½æ¸›ã—ã€æ­£ç¢ºãªé£Ÿææƒ…å ±ã®ç™»éŒ²ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã€‚

## ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚¹ãƒˆãƒ¼ãƒªãƒ¼

**As a** é£Ÿæã‚’ç®¡ç†ã™ã‚‹ãƒ¦ãƒ¼ã‚¶ãƒ¼  
**I want to** é£Ÿæã‚’ç°¡å˜ã«ç™»éŒ²ã—ãŸã„  
**So that** æ­£ç¢ºãªåœ¨åº«ç®¡ç†ãŒã§ãã‚‹

## å…¥åŠ›é …ç›®åˆ†æ

### å¿…é ˆæƒ…å ±ï¼ˆStep 1ï¼‰

- **é£Ÿæå**: æœ€ã‚‚é‡è¦ãªæƒ…å ±
- **ã‚«ãƒ†ã‚´ãƒªãƒ¼**: åˆ†é¡ã®ãŸã‚å¿…é ˆ
- **æ•°é‡**: åœ¨åº«ç®¡ç†ã®åŸºæœ¬
- **å˜ä½**: æ•°é‡ã¨ã‚»ãƒƒãƒˆ

### é‡è¦æƒ…å ±ï¼ˆStep 2ï¼‰

- **ä¿å­˜å ´æ‰€**: å®Ÿç”¨æ€§ã®é«˜ã„æƒ…å ±
- **æœŸé™æƒ…å ±**: é£Ÿæç®¡ç†ã®æ ¸å¿ƒ

### è£œåŠ©æƒ…å ±ï¼ˆStep 3ï¼‰

- **ä¾¡æ ¼**: å®¶è¨ˆç®¡ç†ç”¨
- **è³¼å…¥æ—¥**: å±¥æ­´ç®¡ç†ç”¨
- **ãƒ¡ãƒ¢**: è‡ªç”±è¨˜è¿°

## UIè¦ä»¶

### ã‚¹ãƒ†ãƒƒãƒ—å½¢å¼ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Header                  â”‚
â”‚ [â† æˆ»ã‚‹] é£Ÿæã‚’è¿½åŠ       â”‚
â”‚ â—â—â—‹ (2/3)               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Step Content            â”‚
â”‚                         â”‚
â”‚ Step 1: åŸºæœ¬æƒ…å ±         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ é£Ÿæå               â”‚ â”‚
â”‚ â”‚ [ãƒˆãƒãƒˆ_________]    â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ ã‚«ãƒ†ã‚´ãƒªãƒ¼           â”‚ â”‚
â”‚ â”‚ [é‡èœ â–¼]            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ æ•°é‡     â”‚ â”‚ å˜ä½     â”‚ â”‚
â”‚ â”‚ [3____] â”‚ â”‚ [å€‹ â–¼]  â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Navigation              â”‚
â”‚ [æˆ»ã‚‹]          [æ¬¡ã¸>] â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Step 1: åŸºæœ¬æƒ…å ±

#### 1. é£Ÿæåå…¥åŠ›

```typescript
interface IngredientNameField {
  value: string
  placeholder: string
  maxLength: number
  suggestions: string[]
  validation: {
    required: boolean
    minLength: number
    pattern?: RegExp
  }
}

const ingredientNameConfig: IngredientNameField = {
  value: '',
  placeholder: 'ä¾‹: ãƒˆãƒãƒˆã€é¶ã‚‚ã‚‚è‚‰',
  maxLength: 50,
  suggestions: ['ãƒˆãƒãƒˆ', 'é¶ã‚‚ã‚‚è‚‰', 'ç‰›ä¹³', 'åµ', 'ç‰ã­ã'],
  validation: {
    required: true,
    minLength: 1,
    pattern: /^[ã-ã‚“ã‚¡-ãƒ¶ãƒ¼ä¸€-é¾ a-zA-Z0-9\sãƒ»]+$/,
  },
}
```

**æ©Ÿèƒ½**:

- **å…¥åŠ›å€™è£œ**: ã‚ˆãä½¿ã‚ã‚Œã‚‹é£Ÿæåã®ã‚µã‚¸ã‚§ã‚¹ãƒˆ
- **ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œè¨¼**: æ–‡å­—å…¥åŠ›ã«å¿œã˜ãŸå³åº§ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
- **é‡è¤‡ãƒã‚§ãƒƒã‚¯**: æ—¢å­˜é£Ÿæã¨ã®é‡è¤‡è­¦å‘Š

#### 2. ã‚«ãƒ†ã‚´ãƒªãƒ¼é¸æŠ

```typescript
interface CategoryOption {
  id: string
  name: string
  icon: string
  color: string
  isActive: boolean
}

const categories: CategoryOption[] = [
  { id: 'vegetable', name: 'é‡èœ', icon: 'ğŸ¥¬', color: '#10B981', isActive: true },
  { id: 'meat-fish', name: 'è‚‰ãƒ»é­š', icon: 'ğŸ¥©', color: '#EF4444', isActive: true },
  { id: 'dairy', name: 'ä¹³è£½å“', icon: 'ğŸ¥›', color: '#3B82F6', isActive: true },
  { id: 'seasoning', name: 'èª¿å‘³æ–™', icon: 'ğŸ§‚', color: '#8B5CF6', isActive: true },
  { id: 'beverage', name: 'é£²æ–™', icon: 'ğŸ¥¤', color: '#F59E0B', isActive: true },
  { id: 'other', name: 'ãã®ä»–', icon: 'ğŸ“¦', color: '#6B7280', isActive: true },
]
```

**UIä»•æ§˜**:

- **ã‚°ãƒªãƒƒãƒ‰è¡¨ç¤º**: 2Ã—3ã¾ãŸã¯3Ã—2ã®ã‚«ãƒ¼ãƒ‰å½¢å¼
- **è¦–è¦šçš„é¸æŠ**: ã‚¢ã‚¤ã‚³ãƒ³ + è‰²ã§ç›´æ„Ÿçš„ãªé¸æŠ
- **å¿…é ˆé¸æŠ**: ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆé¸æŠãªã—ã€æ˜ç¤ºçš„ãªé¸æŠã‚’ä¿ƒã™

#### 3. æ•°é‡ãƒ»å˜ä½å…¥åŠ›

```typescript
interface QuantityUnitInput {
  quantity: {
    value: number | null
    min: 0
    max: 99999.99
    step: 0.01
    placeholder: string
  }
  unit: {
    selectedId: string | null
    options: UnitOption[]
    categoryFilter?: string // ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«å¿œã˜ãŸå˜ä½ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
  }
}

interface UnitOption {
  id: string
  name: string
  symbol: string
  type: 'COUNT' | 'WEIGHT' | 'VOLUME'
  defaultFor: string[] // ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¨ãªã‚‹ã‚«ãƒ†ã‚´ãƒªãƒ¼
}
```

**ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**:

- **æ¨ªä¸¦ã³é…ç½®**: æ•°é‡ï¼ˆ60%ï¼‰+ å˜ä½ï¼ˆ40%ï¼‰
- **ã‚¹ãƒãƒ¼ãƒˆå˜ä½é¸æŠ**: ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«å¿œã˜ãŸæ¨å¥¨å˜ä½ã®è‡ªå‹•ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼
- **æ•°å€¤å…¥åŠ›æœ€é©åŒ–**: æ•°å­—ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã®è‡ªå‹•è¡¨ç¤º

### Step 2: ä¿å­˜ãƒ»æœŸé™æƒ…å ±

#### 1. ä¿å­˜å ´æ‰€é¸æŠ

```typescript
interface StorageLocationInput {
  type: 'REFRIGERATED' | 'FROZEN' | 'ROOM_TEMPERATURE'
  detail: string
  presets: StoragePreset[]
}

interface StoragePreset {
  type: string
  detail: string
  icon: string
  isPopular: boolean
}

const storagePresets: StoragePreset[] = [
  { type: 'REFRIGERATED', detail: 'é‡èœå®¤', icon: 'ğŸ¥¬', isPopular: true },
  { type: 'REFRIGERATED', detail: 'ãƒãƒ«ãƒ‰å®¤', icon: 'â„ï¸', isPopular: true },
  { type: 'REFRIGERATED', detail: 'ãƒ‰ã‚¢ãƒã‚±ãƒƒãƒˆ', icon: 'ğŸšª', isPopular: true },
  { type: 'FROZEN', detail: 'å†·å‡åº«', icon: 'ğŸ§Š', isPopular: true },
  { type: 'ROOM_TEMPERATURE', detail: 'é£Ÿå™¨æ£š', icon: 'ğŸ ', isPopular: false },
]
```

**UIè¨­è¨ˆ**:

- **3æ®µéšé¸æŠ**: ã‚¿ã‚¤ãƒ—é¸æŠ â†’ è©³ç´°é¸æŠ â†’ ã‚«ã‚¹ã‚¿ãƒ å…¥åŠ›
- **ãƒ—ãƒªã‚»ãƒƒãƒˆæ´»ç”¨**: ã‚ˆãä½¿ã†ä¿å­˜å ´æ‰€ã®ã‚¯ã‚¤ãƒƒã‚¯é¸æŠ
- **ã‚«ãƒ†ã‚´ãƒªãƒ¼é€£å‹•**: é£Ÿæã‚«ãƒ†ã‚´ãƒªãƒ¼ã«å¿œã˜ãŸæ¨å¥¨ä¿å­˜å ´æ‰€

#### 2. æœŸé™æƒ…å ±å…¥åŠ›

```typescript
interface ExpiryInfoInput {
  bestBeforeDate: Date | null // è³å‘³æœŸé™
  useByDate: Date | null // æ¶ˆè²»æœŸé™
  presetOptions: ExpiryPreset[]
  validationRules: {
    bestBeforeAfterToday: boolean
    useByBeforeBestBefore: boolean
  }
}

interface ExpiryPreset {
  label: string
  days: number
  category: string[]
}

const expiryPresets: ExpiryPreset[] = [
  { label: 'ä»Šæ—¥', days: 0, category: ['meat-fish'] },
  { label: 'æ˜æ—¥', days: 1, category: ['meat-fish'] },
  { label: '3æ—¥å¾Œ', days: 3, category: ['vegetable'] },
  { label: '1é€±é–“å¾Œ', days: 7, category: ['vegetable', 'dairy'] },
  { label: '2é€±é–“å¾Œ', days: 14, category: ['dairy'] },
  { label: '1ãƒ¶æœˆå¾Œ', days: 30, category: ['seasoning'] },
]
```

**å…¥åŠ›æ–¹å¼**:

- **ãƒ—ãƒªã‚»ãƒƒãƒˆ + ã‚«ã‚¹ã‚¿ãƒ **: ã‚ˆãä½¿ã†æœŸé™ã®ã‚¯ã‚¤ãƒƒã‚¯é¸æŠ + ã‚«ãƒ¬ãƒ³ãƒ€ãƒ¼å…¥åŠ›
- **ã‚¹ãƒãƒ¼ãƒˆææ¡ˆ**: ã‚«ãƒ†ã‚´ãƒªãƒ¼ã«å¿œã˜ãŸæœŸé™ãƒ—ãƒªã‚»ãƒƒãƒˆã®è¡¨ç¤º
- **ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³**: æ¶ˆè²»æœŸé™ â‰¤ è³å‘³æœŸé™ã®è‡ªå‹•ãƒã‚§ãƒƒã‚¯

### Step 3: è£œåŠ©æƒ…å ±ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰

#### 1. ä¾¡æ ¼ãƒ»è³¼å…¥æ—¥

```typescript
interface PurchaseInfoInput {
  price: {
    value: number | null
    currency: 'JPY'
    placeholder: 'ä¾‹: 298'
  }
  purchaseDate: {
    value: Date
    defaultToToday: boolean
    maxDate: Date // ä»Šæ—¥ã¾ã§
  }
}
```

#### 2. ãƒ¡ãƒ¢

```typescript
interface MemoInput {
  value: string
  maxLength: 200
  placeholder: string
  suggestions: string[]
}

const memoSuggestions = ['æœ‰æ©Ÿæ ½åŸ¹', 'å›½ç”£', 'ç‰¹ä¾¡å“', 'ã‚»ãƒ¼ãƒ«', 'Lã‚µã‚¤ã‚º', 'å†·å‡å“', 'é–‹å°æ¸ˆã¿']
```

### ãƒ•ã‚©ãƒ¼ãƒ å…¨ä½“ã®çŠ¶æ…‹ç®¡ç†

```typescript
interface IngredientFormState {
  currentStep: number
  totalSteps: number
  data: {
    // Step 1
    name: string
    categoryId: string
    quantity: number
    unitId: string

    // Step 2
    storageLocation: {
      type: string
      detail?: string
    }
    expiryInfo: {
      bestBeforeDate?: Date
      useByDate?: Date
    }

    // Step 3
    price?: number
    purchaseDate: Date
    memo?: string
  }
  validation: {
    [field: string]: {
      isValid: boolean
      message?: string
    }
  }
  isLoading: boolean
}
```

### ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ä»•æ§˜

#### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³

```typescript
const validationRules = {
  name: {
    required: true,
    minLength: 1,
    maxLength: 50,
    pattern: /^[ã-ã‚“ã‚¡-ãƒ¶ãƒ¼ä¸€-é¾ a-zA-Z0-9\sãƒ»]+$/,
    customValidation: async (value: string) => {
      // é‡è¤‡ãƒã‚§ãƒƒã‚¯ï¼ˆç·¨é›†æ™‚ã¯è‡ªèº«ã‚’é™¤å¤–ï¼‰
      const isDuplicate = await checkDuplicateIngredient(value)
      return !isDuplicate || 'åŒã˜åå‰ã®é£ŸæãŒæ—¢ã«ç™»éŒ²ã•ã‚Œã¦ã„ã¾ã™'
    },
  },
  quantity: {
    required: true,
    min: 0,
    max: 99999.99,
    precision: 2,
  },
  expiryInfo: {
    customValidation: (data: ExpiryInfoInput) => {
      if (data.useByDate && data.bestBeforeDate) {
        return data.useByDate <= data.bestBeforeDate || 'æ¶ˆè²»æœŸé™ã¯è³å‘³æœŸé™ä»¥å‰ã«è¨­å®šã—ã¦ãã ã•ã„'
      }
      return true
    },
  },
}
```

#### ã‚¨ãƒ©ãƒ¼è¡¨ç¤º

```typescript
const ErrorMessage = ({ message, type = 'error' }: {
  message: string
  type?: 'error' | 'warning' | 'info'
}) => (
  <div className={`mt-1 text-sm flex items-center ${
    type === 'error' ? 'text-red-600' :
    type === 'warning' ? 'text-yellow-600' :
    'text-blue-600'
  }`}>
    <AlertCircle className="w-4 h-4 mr-1" />
    {message}
  </div>
)
```

### ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³

#### ã‚¹ãƒ†ãƒƒãƒ—é–“ç§»å‹•

```typescript
const StepNavigation = ({
  currentStep,
  totalSteps,
  onPrev,
  onNext,
  onSubmit,
  isValid,
  isLoading
}) => (
  <div className="flex justify-between items-center p-4 border-t">
    <button
      onClick={onPrev}
      disabled={currentStep === 1}
      className="px-4 py-2 text-gray-600 disabled:opacity-50"
    >
      æˆ»ã‚‹
    </button>

    <div className="flex space-x-2">
      {Array.from({ length: totalSteps }, (_, i) => (
        <div
          key={i}
          className={`w-3 h-3 rounded-full ${
            i < currentStep ? 'bg-primary' :
            i === currentStep - 1 ? 'bg-primary' :
            'bg-gray-300'
          }`}
        />
      ))}
    </div>

    <button
      onClick={currentStep === totalSteps ? onSubmit : onNext}
      disabled={!isValid || isLoading}
      className="px-4 py-2 bg-primary text-white rounded-lg disabled:opacity-50"
    >
      {isLoading ? 'ä¿å­˜ä¸­...' :
       currentStep === totalSteps ? 'ä¿å­˜' : 'æ¬¡ã¸'}
    </button>
  </div>
)
```

### APIä»•æ§˜

#### é£Ÿæç™»éŒ²

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `POST /api/v1/ingredients`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**:

```json
{
  "name": "ãƒˆãƒãƒˆ",
  "categoryId": "cat_vegetable",
  "quantity": 3,
  "unitId": "unt_piece",
  "storageLocation": {
    "type": "REFRIGERATED",
    "detail": "é‡èœå®¤"
  },
  "expiryInfo": {
    "bestBeforeDate": "2025-07-05",
    "useByDate": "2025-07-03"
  },
  "price": 298,
  "purchaseDate": "2025-06-28",
  "memo": "æœ‰æ©Ÿæ ½åŸ¹"
}
```

#### é£Ÿæç·¨é›†

**ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ**: `PUT /api/v1/ingredients/{id}`

**ãƒªã‚¯ã‚¨ã‚¹ãƒˆ**: ç™»éŒ²ã¨åŒã˜å½¢å¼

### ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–å¯¾å¿œ

#### Mobile (375px~)

- **1ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: ç¸¦ç©ã¿ãƒ•ã‚©ãƒ¼ãƒ 
- **å¤§ããªå…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰**: 48pxä»¥ä¸Šã®é«˜ã•
- **ãƒ•ãƒ«ã‚¹ã‚¯ãƒªãƒ¼ãƒ³**: ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã«ç”»é¢å…¨ä½“ã‚’ä½¿ç”¨

#### Tablet (768px~)

- **2ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ**: æ•°é‡ãƒ»å˜ä½ãªã©ã®é–¢é€£é …ç›®ã‚’æ¨ªä¸¦ã³
- **ã‚µã‚¤ãƒ‰ãƒãƒ¼**: ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼è¡¨ç¤ºã‚’å³å´ã«é…ç½®

#### Desktop (1024px~)

- **ãƒ¢ãƒ¼ãƒ€ãƒ«å½¢å¼**: ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ã§ãƒ•ã‚©ãƒ¼ãƒ è¡¨ç¤º
- **ãƒ©ã‚¤ãƒ–ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼**: å…¥åŠ›å†…å®¹ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åæ˜ 

## PCç‰ˆè©³ç´°è¨­è¨ˆ

### å…¨ä½“ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (1200pxä»¥ä¸Š)

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Top Bar                              â”‚
â”‚ [ğŸ¥— Food Manager] [ğŸ”] [ğŸ›’] [ğŸ””] [ğŸ‘¤ User] [Settings]      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Nav â”‚                Ingredient Form                  â”‚ Live â”‚
â”‚     â”‚                                                â”‚ Previewâ”‚
â”‚ [ğŸ“Š]â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚       â”‚
â”‚ [ğŸ¥—]â”‚ â”‚  é£Ÿæç™»éŒ²ãƒ»ç·¨é›† [Step 1/3]                 â”‚â”‚ ğŸ…ãƒˆãƒãƒˆâ”‚
â”‚ [ğŸ›’]â”‚ â”‚  â—â—â—‹ Progress                              â”‚â”‚       â”‚
â”‚ [ğŸ“ˆ]â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚ ã‚«ãƒ†ã‚´ãƒªâ”‚
â”‚     â”‚                                                â”‚ é‡èœ   â”‚
â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚       â”‚
â”‚     â”‚ â”‚  Step Content   â”‚ â”‚    Smart Suggestions    â”‚â”‚ æ•°é‡   â”‚
â”‚     â”‚ â”‚                 â”‚ â”‚                         â”‚â”‚ 3å€‹    â”‚
â”‚     â”‚ â”‚ [é£Ÿæå_______] â”‚ â”‚ âš¡ å…¥åŠ›å€™è£œ              â”‚â”‚       â”‚
â”‚     â”‚ â”‚                 â”‚ â”‚ ãƒ»ãƒˆãƒãƒˆ                â”‚â”‚ æœŸé™   â”‚
â”‚     â”‚ â”‚ ã‚«ãƒ†ã‚´ãƒªãƒ¼:      â”‚ â”‚ ãƒ»ãƒŸãƒ‹ãƒˆãƒãƒˆ            â”‚â”‚ æ®‹ã‚Š3æ—¥â”‚
â”‚     â”‚ â”‚ [ğŸ¥¬é‡èœ] [ğŸ¥©è‚‰] â”‚ â”‚ ãƒ»ãƒ•ãƒ«ãƒ¼ãƒ„ãƒˆãƒãƒˆ        â”‚â”‚       â”‚
â”‚     â”‚ â”‚ [ğŸ¥›ä¹³è£½å“][ğŸ§‚èª¿å‘³]â”‚ â”‚                         â”‚â”‚ ä¿å­˜å ´æ‰€â”‚
â”‚     â”‚ â”‚                 â”‚ â”‚ ğŸ’¡ ãŠã™ã™ã‚è¨­å®š         â”‚â”‚ å†·è”µåº« â”‚
â”‚     â”‚ â”‚ æ•°é‡: [3____]   â”‚ â”‚ ãƒ»ä¿å­˜å ´æ‰€: å†·è”µåº«      â”‚â”‚       â”‚
â”‚     â”‚ â”‚ å˜ä½: [å€‹ â–¼]    â”‚ â”‚ ãƒ»æœŸé™: 3-5æ—¥          â”‚â”‚ ãã®ä»– â”‚
â”‚     â”‚ â”‚                 â”‚ â”‚ ãƒ»æ¨å¥¨åœ¨åº«: 5å€‹         â”‚â”‚ ãƒ»ç”»åƒ â”‚
â”‚     â”‚ â”‚ [ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³] â”‚ â”‚                         â”‚â”‚ ãƒ»ãƒ¡ãƒ¢ â”‚
â”‚     â”‚ â”‚ âœ“ åå‰OK        â”‚ â”‚ ğŸ“Š çµ±è¨ˆ                â”‚â”‚       â”‚
â”‚     â”‚ â”‚ âœ“ ã‚«ãƒ†ã‚´ãƒªãƒ¼OK  â”‚ â”‚ ãƒ»ã“ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼: 5ä»¶   â”‚â”‚       â”‚
â”‚     â”‚ â”‚ âœ“ æ•°é‡OK        â”‚ â”‚ ãƒ»å¹³å‡ä¾¡æ ¼: Â¥250       â”‚â”‚       â”‚
â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚       â”‚
â”‚     â”‚                                                â”‚       â”‚
â”‚     â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”â”‚       â”‚
â”‚     â”‚ â”‚           Navigation                        â”‚â”‚       â”‚
â”‚     â”‚ â”‚  [< æˆ»ã‚‹]  [ä¸‹æ›¸ãä¿å­˜]  [æ¬¡ã¸: ä¿å­˜ãƒ»æœŸé™>] â”‚â”‚       â”‚
â”‚     â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜â”‚       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ãƒ¢ãƒ¼ãƒ€ãƒ«ç‰ˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

```jsx
const IngredientFormModal = ({ isOpen, onClose, ingredientToEdit, onSuccess }) => (
  <Modal size="large" isOpen={isOpen} onClose={onClose}>
    <div className="grid h-[80vh] grid-cols-3">
      {/* ãƒ¡ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ  */}
      <div className="col-span-2 p-6">
        <IngredientFormMain />
      </div>

      {/* ãƒ©ã‚¤ãƒ–ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ */}
      <div className="col-span-1 border-l bg-gray-50 p-6">
        <IngredientPreview />
      </div>
    </div>
  </Modal>
)
```

### 3ã‚«ãƒ©ãƒ ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ

#### å·¦ãƒ»ä¸­å¤®ã‚«ãƒ©ãƒ : ãƒ•ã‚©ãƒ¼ãƒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„

```jsx
const EnhancedIngredientForm = ({ currentStep, formData, onStepChange, onFieldChange }) => (
  <div className="mx-auto max-w-4xl flex-1 p-6">
    {/* ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒ˜ãƒƒãƒ€ãƒ¼ */}
    <div className="mb-8">
      <div className="mb-4 flex items-center justify-between">
        <h1 className="text-3xl font-bold text-gray-900">
          {formData.id ? 'é£Ÿæã‚’ç·¨é›†' : 'æ–°ã—ã„é£Ÿæã‚’è¿½åŠ '}
        </h1>
        <div className="text-sm text-gray-500">Step {currentStep} / 3</div>
      </div>

      {/* å¼·åŒ–ã•ã‚ŒãŸãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ */}
      <div className="relative">
        <div className="flex items-center">
          {[1, 2, 3].map((step) => (
            <div key={step} className="flex items-center">
              <button
                onClick={() => onStepChange(step)}
                className={`flex h-10 w-10 items-center justify-center rounded-full border-2 font-medium transition-all ${
                  step < currentStep
                    ? 'border-green-500 bg-green-500 text-white'
                    : step === currentStep
                      ? 'border-blue-500 bg-blue-500 text-white'
                      : 'border-gray-300 bg-gray-100 text-gray-400'
                }`}
              >
                {step < currentStep ? <Check className="h-5 w-5" /> : step}
              </button>

              {step < 3 && (
                <div
                  className={`mx-2 h-1 w-16 ${step < currentStep ? 'bg-green-500' : 'bg-gray-300'}`}
                />
              )}
            </div>
          ))}
        </div>

        {/* ã‚¹ãƒ†ãƒƒãƒ—ãƒ©ãƒ™ãƒ« */}
        <div className="mt-2 flex justify-between text-sm">
          <span className={currentStep >= 1 ? 'font-medium text-blue-600' : 'text-gray-500'}>
            åŸºæœ¬æƒ…å ±
          </span>
          <span className={currentStep >= 2 ? 'font-medium text-blue-600' : 'text-gray-500'}>
            ä¿å­˜ãƒ»æœŸé™
          </span>
          <span className={currentStep >= 3 ? 'font-medium text-blue-600' : 'text-gray-500'}>
            è£œåŠ©æƒ…å ±
          </span>
        </div>
      </div>
    </div>

    {/* 2ã‚«ãƒ©ãƒ ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ */}
    <div className="grid grid-cols-3 gap-8">
      {/* ãƒ¡ã‚¤ãƒ³ãƒ•ã‚©ãƒ¼ãƒ  */}
      <div className="col-span-2">
        {currentStep === 1 && (
          <Step1BasicInfoEnhanced formData={formData} onChange={onFieldChange} />
        )}
        {currentStep === 2 && (
          <Step2StorageExpiryEnhanced formData={formData} onChange={onFieldChange} />
        )}
        {currentStep === 3 && (
          <Step3AdditionalEnhanced formData={formData} onChange={onFieldChange} />
        )}
      </div>

      {/* ã‚µã‚¸ã‚§ã‚¹ãƒˆãƒ»ãƒ˜ãƒ«ãƒ—ãƒ‘ãƒãƒ« */}
      <div className="col-span-1">
        <SmartSuggestionPanel
          currentStep={currentStep}
          formData={formData}
          onSuggestionSelect={onFieldChange}
        />
      </div>
    </div>
  </div>
)
```

#### Step 1: æ‹¡å¼µã•ã‚ŒãŸåŸºæœ¬æƒ…å ±

```jsx
const Step1BasicInfoEnhanced = ({ formData, onChange }) => (
  <div className="space-y-8">
    {/* é£Ÿæåå…¥åŠ› */}
    <div>
      <label className="mb-3 block text-lg font-semibold text-gray-900">
        é£Ÿæå <span className="text-red-500">*</span>
      </label>

      <div className="relative">
        <input
          type="text"
          value={formData.name}
          onChange={(e) => onChange('name', e.target.value)}
          placeholder="ä¾‹: ãƒˆãƒãƒˆã€é¶ã‚‚ã‚‚è‚‰"
          className="w-full rounded-lg border border-gray-300 px-4 py-3 text-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-500"
          autoFocus
        />

        {/* ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œè¨¼è¡¨ç¤º */}
        <div className="absolute top-3 right-3">
          {formData.name && validateIngredientName(formData.name) ? (
            <Check className="h-6 w-6 text-green-500" />
          ) : formData.name ? (
            <X className="h-6 w-6 text-red-500" />
          ) : null}
        </div>
      </div>

      {/* å…¥åŠ›å€™è£œ */}
      {formData.name && (
        <IngredientSuggestions
          query={formData.name}
          onSelect={(suggestion) => onChange('name', suggestion)}
        />
      )}
    </div>

    {/* ã‚«ãƒ†ã‚´ãƒªãƒ¼é¸æŠ */}
    <div>
      <label className="mb-3 block text-lg font-semibold text-gray-900">
        ã‚«ãƒ†ã‚´ãƒªãƒ¼ <span className="text-red-500">*</span>
      </label>

      <div className="grid grid-cols-3 gap-3">
        {categories.map((category) => (
          <button
            key={category.id}
            onClick={() => onChange('categoryId', category.id)}
            className={`rounded-lg border-2 p-4 transition-all hover:shadow-md ${
              formData.categoryId === category.id
                ? 'border-blue-500 bg-blue-50'
                : 'border-gray-200 hover:border-gray-300'
            }`}
          >
            <div className="text-center">
              <div className="mb-2 text-3xl">{category.icon}</div>
              <div className="font-medium text-gray-900">{category.name}</div>
              <div className="mt-1 text-xs text-gray-500">{category.count}ä»¶ç™»éŒ²æ¸ˆã¿</div>
            </div>
          </button>
        ))}
      </div>
    </div>

    {/* æ•°é‡ãƒ»å˜ä½å…¥åŠ› */}
    <div className="grid grid-cols-2 gap-6">
      <div>
        <label className="mb-3 block text-lg font-semibold text-gray-900">
          æ•°é‡ <span className="text-red-500">*</span>
        </label>
        <input
          type="number"
          value={formData.quantity}
          onChange={(e) => onChange('quantity', parseFloat(e.target.value))}
          min="0"
          step="0.01"
          placeholder="0"
          className="w-full rounded-lg border border-gray-300 px-4 py-3 text-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-500"
        />
      </div>

      <div>
        <label className="mb-3 block text-lg font-semibold text-gray-900">
          å˜ä½ <span className="text-red-500">*</span>
        </label>
        <select
          value={formData.unitId}
          onChange={(e) => onChange('unitId', e.target.value)}
          className="w-full rounded-lg border border-gray-300 px-4 py-3 text-lg focus:border-blue-500 focus:ring-2 focus:ring-blue-500"
        >
          <option value="">å˜ä½ã‚’é¸æŠ</option>
          {getUnitsForCategory(formData.categoryId).map((unit) => (
            <option key={unit.id} value={unit.id}>
              {unit.name} ({unit.symbol})
            </option>
          ))}
        </select>
      </div>
    </div>

    {/* ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ¤œè¨¼çµæœ */}
    <ValidationSummary
      validations={[
        {
          field: 'name',
          isValid: validateIngredientName(formData.name),
          message: 'é£ŸæåãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã™',
        },
        {
          field: 'category',
          isValid: !!formData.categoryId,
          message: 'ã‚«ãƒ†ã‚´ãƒªãƒ¼ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã™',
        },
        {
          field: 'quantity',
          isValid: formData.quantity > 0,
          message: 'æœ‰åŠ¹ãªæ•°é‡ãŒå…¥åŠ›ã•ã‚Œã¦ã„ã¾ã™',
        },
        { field: 'unit', isValid: !!formData.unitId, message: 'å˜ä½ãŒé¸æŠã•ã‚Œã¦ã„ã¾ã™' },
      ]}
    />
  </div>
)
```

#### ã‚¹ãƒãƒ¼ãƒˆã‚µã‚¸ã‚§ã‚¹ãƒˆãƒ‘ãƒãƒ«

```jsx
const SmartSuggestionPanel = ({ currentStep, formData, onSuggestionSelect }) => (
  <div className="sticky top-6 rounded-lg border border-gray-200 bg-white p-6">
    <h3 className="mb-4 font-semibold text-gray-900">ã‚¹ãƒãƒ¼ãƒˆã‚µã‚¸ã‚§ã‚¹ãƒˆ</h3>

    {currentStep === 1 && (
      <div className="space-y-4">
        {/* å…¥åŠ›å€™è£œ */}
        {formData.name && (
          <div>
            <h4 className="mb-2 text-sm font-medium text-gray-700">âš¡ å…¥åŠ›å€™è£œ</h4>
            <div className="space-y-1">
              {getSimilarIngredients(formData.name).map((suggestion) => (
                <button
                  key={suggestion}
                  onClick={() => onSuggestionSelect('name', suggestion)}
                  className="block w-full rounded px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"
                >
                  {suggestion}
                </button>
              ))}
            </div>
          </div>
        )}

        {/* ã‚«ãƒ†ã‚´ãƒªãƒ¼æ¨å¥¨ */}
        {formData.name && (
          <div>
            <h4 className="mb-2 text-sm font-medium text-gray-700">ğŸ’¡ æ¨å¥¨ã‚«ãƒ†ã‚´ãƒªãƒ¼</h4>
            <div className="space-y-1">
              {suggestCategoryFromName(formData.name).map((category) => (
                <button
                  key={category.id}
                  onClick={() => onSuggestionSelect('categoryId', category.id)}
                  className="flex w-full items-center rounded px-3 py-2 text-sm text-gray-700 hover:bg-gray-100"
                >
                  <span className="mr-2">{category.icon}</span>
                  {category.name}
                </button>
              ))}
            </div>
          </div>
        )}

        {/* çµ±è¨ˆæƒ…å ± */}
        <div>
          <h4 className="mb-2 text-sm font-medium text-gray-700">ğŸ“Š çµ±è¨ˆ</h4>
          <div className="space-y-2 text-sm text-gray-600">
            <div className="flex justify-between">
              <span>ã“ã®ã‚«ãƒ†ã‚´ãƒªãƒ¼</span>
              <span>{getCategoryStats(formData.categoryId).count}ä»¶</span>
            </div>
            <div className="flex justify-between">
              <span>å¹³å‡ä¾¡æ ¼</span>
              <span>Â¥{getCategoryStats(formData.categoryId).averagePrice}</span>
            </div>
          </div>
        </div>
      </div>
    )}

    {currentStep === 2 && (
      <div className="space-y-4">
        {/* ä¿å­˜å ´æ‰€æ¨å¥¨ */}
        <div>
          <h4 className="mb-2 text-sm font-medium text-gray-700">ğŸ’¡ ãŠã™ã™ã‚ä¿å­˜å ´æ‰€</h4>
          <div className="space-y-1">
            {getRecommendedStorage(formData.categoryId).map((storage) => (
              <button
                key={storage.type}
                onClick={() => onSuggestionSelect('storageLocation', storage)}
                className="flex w-full items-center rounded px-3 py-2 text-sm text-gray-700 hover:bg-gray-100"
              >
                <span className="mr-2">{storage.icon}</span>
                {storage.label}
              </button>
            ))}
          </div>
        </div>

        {/* æœŸé™æ¨å¥¨ */}
        <div>
          <h4 className="mb-2 text-sm font-medium text-gray-700">ğŸ“… æ¨å¥¨æœŸé™</h4>
          <div className="space-y-1">
            {getRecommendedExpiry(formData.categoryId).map((expiry) => (
              <button
                key={expiry.days}
                onClick={() => onSuggestionSelect('expiryInfo', expiry)}
                className="block w-full rounded px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"
              >
                {expiry.label} ({expiry.days}æ—¥å¾Œ)
              </button>
            ))}
          </div>
        </div>
      </div>
    )}

    {currentStep === 3 && (
      <div className="space-y-4">
        {/* ä¾¡æ ¼æ¨å¥¨ */}
        <div>
          <h4 className="mb-2 text-sm font-medium text-gray-700">ğŸ’° ä¾¡æ ¼å‚è€ƒ</h4>
          <div className="space-y-2 text-sm text-gray-600">
            <div className="flex justify-between">
              <span>å¹³å‡ä¾¡æ ¼</span>
              <span>Â¥{getAveragePrice(formData.name)}</span>
            </div>
            <div className="flex justify-between">
              <span>æœ€å®‰å€¤</span>
              <span>Â¥{getMinPrice(formData.name)}</span>
            </div>
            <div className="flex justify-between">
              <span>æœ€é«˜å€¤</span>
              <span>Â¥{getMaxPrice(formData.name)}</span>
            </div>
          </div>
        </div>

        {/* ãƒ¡ãƒ¢ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ */}
        <div>
          <h4 className="mb-2 text-sm font-medium text-gray-700">ğŸ“ ãƒ¡ãƒ¢ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆ</h4>
          <div className="space-y-1">
            {getMemoTemplates(formData.categoryId).map((template) => (
              <button
                key={template}
                onClick={() => onSuggestionSelect('memo', template)}
                className="block w-full rounded px-3 py-2 text-left text-sm text-gray-700 hover:bg-gray-100"
              >
                {template}
              </button>
            ))}
          </div>
        </div>
      </div>
    )}
  </div>
)
```

#### å³ã‚µã‚¤ãƒ‰ãƒ‘ãƒãƒ«: ãƒ©ã‚¤ãƒ–ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼

```jsx
const IngredientPreviewPanel = ({ formData }) => (
  <aside className="w-80 border-l border-gray-200 bg-gray-50 p-6">
    <div className="sticky top-6">
      <h2 className="mb-6 text-lg font-semibold">ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼</h2>

      {/* ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚«ãƒ¼ãƒ‰ */}
      <div className="mb-6 rounded-lg border bg-white p-6">
        <div className="mb-4 text-center">
          <div className="mx-auto mb-3 flex h-20 w-20 items-center justify-center rounded-lg bg-gray-100">
            {formData.image ? (
              <img
                src={formData.image}
                alt={formData.name}
                className="h-full w-full rounded-lg object-cover"
              />
            ) : formData.categoryId ? (
              <span className="text-2xl">{getCategoryIcon(formData.categoryId)}</span>
            ) : (
              <Package className="h-8 w-8 text-gray-400" />
            )}
          </div>

          <h3 className="text-lg font-semibold text-gray-900">
            {formData.name || 'é£Ÿæåã‚’å…¥åŠ›ã—ã¦ãã ã•ã„'}
          </h3>

          {formData.categoryId && (
            <p className="text-sm text-gray-600">{getCategoryName(formData.categoryId)}</p>
          )}
        </div>

        {/* è©³ç´°æƒ…å ± */}
        <div className="space-y-3 text-sm">
          <div className="flex justify-between">
            <span className="text-gray-600">æ•°é‡</span>
            <span className="font-medium">
              {formData.quantity || 0} {getUnitSymbol(formData.unitId) || 'å˜ä½'}
            </span>
          </div>

          {formData.storageLocation && (
            <div className="flex justify-between">
              <span className="text-gray-600">ä¿å­˜å ´æ‰€</span>
              <span className="font-medium">
                {getStorageLocationLabel(formData.storageLocation)}
              </span>
            </div>
          )}

          {formData.expiryInfo?.bestBeforeDate && (
            <div className="flex justify-between">
              <span className="text-gray-600">è³å‘³æœŸé™</span>
              <span className="font-medium">
                {format(formData.expiryInfo.bestBeforeDate, 'MM/dd')}
              </span>
            </div>
          )}

          {formData.price && (
            <div className="flex justify-between">
              <span className="text-gray-600">ä¾¡æ ¼</span>
              <span className="font-medium">Â¥{formData.price}</span>
            </div>
          )}
        </div>
      </div>

      {/* å…¥åŠ›é€²æ— */}
      <div className="mb-6 rounded-lg border bg-white p-4">
        <h4 className="mb-3 font-medium">å…¥åŠ›é€²æ—</h4>

        <div className="space-y-2">
          {[
            { label: 'åŸºæœ¬æƒ…å ±', completed: isStep1Complete(formData) },
            { label: 'ä¿å­˜ãƒ»æœŸé™', completed: isStep2Complete(formData) },
            { label: 'è£œåŠ©æƒ…å ±', completed: isStep3Complete(formData) },
          ].map((step, index) => (
            <div key={index} className="flex items-center space-x-2">
              <div
                className={`h-4 w-4 rounded-full ${
                  step.completed ? 'bg-green-500' : 'bg-gray-300'
                }`}
              />
              <span className={`text-sm ${step.completed ? 'text-green-700' : 'text-gray-600'}`}>
                {step.label}
              </span>
              {step.completed && <Check className="h-4 w-4 text-green-500" />}
            </div>
          ))}
        </div>

        <div className="mt-4">
          <div className="mb-1 flex justify-between text-sm">
            <span>å®Œäº†ç‡</span>
            <span>{getCompletionPercentage(formData)}%</span>
          </div>
          <div className="h-2 w-full rounded-full bg-gray-200">
            <div
              className="h-2 rounded-full bg-blue-500 transition-all"
              style={{ width: `${getCompletionPercentage(formData)}%` }}
            />
          </div>
        </div>
      </div>

      {/* é–¢é€£é£Ÿæ */}
      {formData.name && (
        <div className="rounded-lg border bg-white p-4">
          <h4 className="mb-3 font-medium">é–¢é€£é£Ÿæ</h4>
          <div className="space-y-2">
            {getRelatedIngredients(formData.name)
              .slice(0, 3)
              .map((ingredient) => (
                <div key={ingredient.id} className="flex items-center space-x-2">
                  <span className="text-lg">{ingredient.category.icon}</span>
                  <span className="text-sm text-gray-700">{ingredient.name}</span>
                </div>
              ))}
          </div>
        </div>
      )}
    </div>
  </aside>
)
```

### ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

```typescript
const ingredientFormShortcuts = {
  // ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³
  'Ctrl+Enter': () => submitForm(),
  'Ctrl+S': () => saveDraft(),
  Escape: () => closeForm(),

  // ã‚¹ãƒ†ãƒƒãƒ—ç§»å‹•
  'Ctrl+ArrowRight': () => nextStep(),
  'Ctrl+ArrowLeft': () => previousStep(),

  // ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç§»å‹•
  Tab: () => focusNextField(),
  'Shift+Tab': () => focusPreviousField(),

  // ã‚¯ã‚¤ãƒƒã‚¯å…¥åŠ›
  'Ctrl+1': () => focusField('name'),
  'Ctrl+2': () => focusField('category'),
  'Ctrl+3': () => focusField('quantity'),

  // ã‚µã‚¸ã‚§ã‚¹ãƒˆ
  'Ctrl+Space': () => showSuggestions(),
  Enter: () => selectFirstSuggestion(),

  // ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼
  'Ctrl+P': () => togglePreview(),
  F11: () => toggleFullscreen(),
}
```

### ãƒãƒƒãƒå…¥åŠ›æ©Ÿèƒ½

```jsx
const BatchIngredientInput = ({ onBatchSubmit }) => (
  <div className="rounded-lg border bg-white p-6">
    <h3 className="mb-4 font-semibold">ä¸€æ‹¬å…¥åŠ›</h3>

    <div className="space-y-4">
      {/* CSVã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ */}
      <div>
        <label className="mb-2 block text-sm font-medium text-gray-700">
          CSVãƒ•ã‚¡ã‚¤ãƒ«ã‹ã‚‰ã‚¤ãƒ³ãƒãƒ¼ãƒˆ
        </label>
        <div className="rounded-lg border-2 border-dashed border-gray-300 p-6 text-center">
          <Upload className="mx-auto mb-2 h-8 w-8 text-gray-400" />
          <p className="text-sm text-gray-600">
            CSVãƒ•ã‚¡ã‚¤ãƒ«ã‚’ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã¾ãŸã¯ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
          </p>
          <input type="file" accept=".csv" onChange={handleCsvUpload} className="hidden" />
        </div>
      </div>

      {/* ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ› */}
      <div>
        <label className="mb-2 block text-sm font-medium text-gray-700">
          ãƒ†ã‚­ã‚¹ãƒˆå½¢å¼ã§ä¸€æ‹¬å…¥åŠ›
        </label>
        <textarea
          placeholder="ä¾‹:&#10;ãƒˆãƒãƒˆ,é‡èœ,3,å€‹&#10;ç‰›ä¹³,ä¹³è£½å“,1,L&#10;é¶è‚‰,è‚‰é¡,500,g"
          rows={6}
          className="w-full rounded-lg border border-gray-300 px-3 py-2"
        />
        <p className="mt-1 text-xs text-gray-500">
          å½¢å¼: é£Ÿæå,ã‚«ãƒ†ã‚´ãƒªãƒ¼,æ•°é‡,å˜ä½ï¼ˆ1è¡Œã«ã¤ã1é£Ÿæï¼‰
        </p>
      </div>

      <button
        onClick={processBatchInput}
        className="w-full rounded-lg bg-blue-500 px-4 py-2 text-white hover:bg-blue-600"
      >
        ä¸€æ‹¬è¿½åŠ 
      </button>
    </div>
  </div>
)
```

### ã‚¢ã‚¯ã‚»ã‚·ãƒ“ãƒªãƒ†ã‚£

#### ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ç®¡ç†

- **è‡ªå‹•ãƒ•ã‚©ãƒ¼ã‚«ã‚¹**: ã‚¹ãƒ†ãƒƒãƒ—ç§»å‹•æ™‚ã®é©åˆ‡ãªãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹
- **Tabé †åº**: è«–ç†çš„ãªå…¥åŠ›é †åº
- **Enteré€ä¿¡**: æœ€çµ‚ã‚¹ãƒ†ãƒƒãƒ—ã§Enterã‚­ãƒ¼ã«ã‚ˆã‚‹é€ä¿¡

#### ã‚¹ã‚¯ãƒªãƒ¼ãƒ³ãƒªãƒ¼ãƒ€ãƒ¼å¯¾å¿œ

- **ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ãƒ©ãƒ™ãƒ«**: æ˜ç¢ºãªé–¢é€£ä»˜ã‘
- **ã‚¨ãƒ©ãƒ¼é€šçŸ¥**: aria-describedby ã§ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¨é–¢é€£ä»˜ã‘
- **é€²æ—è¡¨ç¤º**: aria-label ã§ç¾åœ¨ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’éŸ³å£°æ¡ˆå†…

## æŠ€è¡“å®Ÿè£…

### Componentæ§‹é€ 

```
IngredientFormPage
â”œâ”€â”€ FormHeader
â”‚   â”œâ”€â”€ BackButton
â”‚   â”œâ”€â”€ Title
â”‚   â””â”€â”€ StepIndicator
â”œâ”€â”€ FormContent
â”‚   â”œâ”€â”€ Step1BasicInfo
â”‚   â”‚   â”œâ”€â”€ NameInput
â”‚   â”‚   â”œâ”€â”€ CategorySelect
â”‚   â”‚   â””â”€â”€ QuantityUnitInput
â”‚   â”œâ”€â”€ Step2StorageExpiry
â”‚   â”‚   â”œâ”€â”€ StorageLocationSelect
â”‚   â”‚   â””â”€â”€ ExpiryInfoInput
â”‚   â””â”€â”€ Step3Additional
â”‚       â”œâ”€â”€ PriceInput
â”‚       â”œâ”€â”€ PurchaseDateInput
â”‚       â””â”€â”€ MemoInput
â”œâ”€â”€ StepNavigation
â””â”€â”€ LoadingOverlay (conditional)
```

### çŠ¶æ…‹ç®¡ç†

```typescript
export const useIngredientForm = (initialData?: Ingredient) => {
  const [formState, setFormState] = useState<IngredientFormState>({
    currentStep: 1,
    totalSteps: 3,
    data: initialData || getDefaultFormData(),
    validation: {},
    isLoading: false,
  })

  const validateStep = useCallback(
    (step: number) => {
      // ã‚¹ãƒ†ãƒƒãƒ—ã”ã¨ã®ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
      const fieldsToValidate = getFieldsForStep(step)
      return validateFields(formState.data, fieldsToValidate)
    },
    [formState.data]
  )

  const nextStep = useCallback(() => {
    if (validateStep(formState.currentStep)) {
      setFormState((prev) => ({
        ...prev,
        currentStep: prev.currentStep + 1,
      }))
    }
  }, [formState.currentStep, validateStep])

  const submitForm = useMutation({
    mutationFn: initialData ? updateIngredient : createIngredient,
    onSuccess: () => {
      router.push('/ingredients')
      toast.success('é£Ÿæã‚’ä¿å­˜ã—ã¾ã—ãŸ')
    },
    onError: (error) => {
      toast.error('ä¿å­˜ã«å¤±æ•—ã—ã¾ã—ãŸ')
    },
  })

  return {
    formState,
    setFormState,
    nextStep,
    prevStep: () =>
      setFormState((prev) => ({
        ...prev,
        currentStep: Math.max(1, prev.currentStep - 1),
      })),
    submitForm: submitForm.mutate,
    isSubmitting: submitForm.isLoading,
  }
}
```

## ä»Šå¾Œã®æ‹¡å¼µ

### ãƒ•ã‚§ãƒ¼ã‚º2æ©Ÿèƒ½

- **ç”»åƒã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰**: é£Ÿæã®å†™çœŸç™»éŒ²
- **ãƒãƒ¼ã‚³ãƒ¼ãƒ‰ã‚¹ã‚­ãƒ£ãƒ³**: å•†å“æƒ…å ±ã®è‡ªå‹•å…¥åŠ›
- **ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆæ©Ÿèƒ½**: ã‚ˆãç™»éŒ²ã™ã‚‹é£Ÿæã®ãƒ†ãƒ³ãƒ—ãƒ¬ãƒ¼ãƒˆä¿å­˜

### ãƒ•ã‚§ãƒ¼ã‚º3æ©Ÿèƒ½

- **OCRæ©Ÿèƒ½**: ãƒ¬ã‚·ãƒ¼ãƒˆã‹ã‚‰ã®è‡ªå‹•å…¥åŠ›
- **éŸ³å£°å…¥åŠ›**: ã€Œãƒˆãƒãƒˆ3å€‹ã‚’å†·è”µåº«ã«ã€ã®éŸ³å£°ç™»éŒ²
- **AIææ¡ˆ**: è³¼å…¥å±¥æ­´ã«åŸºã¥ãæœŸé™ãƒ»ä¾¡æ ¼ã®è‡ªå‹•ææ¡ˆ
